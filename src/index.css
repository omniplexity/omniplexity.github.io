@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme - Claude-inspired clean whites */
    --surface: #ffffff;
    --surface-secondary: #f7f7f8;
    --surface-tertiary: #ececf1;
    --border: #e5e5e5;
    --border-secondary: #d9d9e3;
    --text: #1a1a1a;
    --text-secondary: #6b6b6b;
    --text-tertiary: #999999;
    --accent: #10a37f;
    --accent-hover: #0d8a6a;
  }

  .dark {
    /* Dark theme - deep blacks with subtle contrast */
    --surface: #0f0f0f;
    --surface-secondary: #1a1a1a;
    --surface-tertiary: #262626;
    --border: #2e2e2e;
    --border-secondary: #3d3d3d;
    --text: #ececec;
    --text-secondary: #a0a0a0;
    --text-tertiary: #6b6b6b;
    --accent: #10a37f;
    --accent-hover: #1dc992;
  }

  html {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-surface text-text;
    overflow: hidden;
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for mobile */
  }

  #root {
    height: 100%;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border-secondary);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--border-secondary) transparent;
  }

  /* Focus styles */
  :focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }
}

@layer components {
  /* Message bubble styles */
  .message-user {
    @apply bg-accent text-white rounded-2xl rounded-br-md;
  }

  .message-assistant {
    @apply bg-surface-secondary border border-border rounded-2xl rounded-bl-md;
  }

  /* Code blocks */
  .prose pre {
    @apply bg-surface-tertiary border border-border rounded-lg overflow-x-auto;
  }

  .prose code {
    @apply bg-surface-tertiary px-1.5 py-0.5 rounded text-sm font-mono;
  }

  .prose pre code {
    @apply bg-transparent p-0;
  }

  /* Thinking indicator dots */
  .thinking-dot {
    @apply w-2 h-2 rounded-full bg-text-tertiary;
    animation: thinking 1.4s infinite ease-in-out both;
  }

  .thinking-dot:nth-child(1) {
    animation-delay: -0.32s;
  }

  .thinking-dot:nth-child(2) {
    animation-delay: -0.16s;
  }

  @keyframes thinking {
    0%, 80%, 100% {
      transform: scale(0.6);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Typing cursor */
  .typing-cursor {
    @apply inline-block w-0.5 h-5 bg-text ml-0.5;
    animation: blink 1s step-end infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  /* Status indicator */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot-connected {
    @apply bg-green-500;
    box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
  }

  .status-dot-connecting {
    @apply bg-yellow-500;
    animation: pulse 2s infinite;
  }

  .status-dot-disconnected {
    @apply bg-red-500;
  }

  /* Input area */
  .chat-input {
    @apply w-full resize-none bg-transparent border-0 outline-none;
    @apply text-text placeholder-text-tertiary;
    @apply text-base leading-relaxed;
    field-sizing: content;
    min-height: 24px;
    max-height: 200px;
  }

  /* Safe area padding for mobile */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0);
  }
}

@layer utilities {
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Gradient mask for overflow text */
  .mask-gradient-bottom {
    mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
  }
}
