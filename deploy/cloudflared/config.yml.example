---
# Cloudflare Tunnel config for OmniPlexity Backend
# Install cloudflared: https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/tunnel-guide/
# Run: cloudflared tunnel login
# Then: cloudflared tunnel create omniplexity-backend
# Update tunnel-id and credentials-file below

tunnel: omniplexity-backend-tunnel-id-here
credentials-file: /path/to/.cloudflared/omniplexity-backend.json

ingress:
  # Backend API
  - hostname: your-subdomain.yourdomain.com  # Or use catch-all with *.yourdomain.com
    service: http://localhost:8787
    originRequest:
      # Add the shared secret header for origin lock
      # This header must match ORIGIN_LOCK_SECRET in .env
      setRequestHeader:
        - X-Origin-Secret: "your-shared-secret-here-change-in-prod"
  # Catch-all
  - service: http_status:404